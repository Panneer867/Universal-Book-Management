<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/" th:replace="base::layout(~{::section})">
    <body>
        <section>
            <div class="page-header my-3 pb-2">
                <h3 class="page-title">
                    Branch Profile
                </h3>
            </div>
            <div class="alert alert-danger text-center mb-1 py-2" role="alert" th:if="${param.emailAlreadyExists}">[[${emailExists}]]</div>
            <div class="alert alert-danger text-center mb-1 py-2" role="alert" th:if="${param.mobileAlreadyExists}">[[${mobileExists}]]</div>
            <div class="alert alert-danger text-center mb-1 py-2" role="alert" th:if="${param.usernameExists}">[[${usernameExists}]]</div>
            <div class="alert alert-success text-center mb-1 py-2" role="alert" th:if="${param.profileUpdated}">[[${profile}]]</div>
            <div class="alert alert-success text-center mb-1 py-2" role="alert" th:if="${param.passwordChanged}">[[${changed}]]</div>
            <div class="alert alert-danger text-center mb-1 py-2" role="alert" th:if="${param.wrongPassword}">[[${wrong}]]</div>
            <div class="row justify-content-center">
                <div class="col-10 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body pt-0 px-0 pb-0">
                            <div class="row bg-primary py-2">
                                <div class="col-3">
                                    <div class="form-group m-0">
                                        <label class="font-weight-bold text-white pt-1 m-0 pr-1">Branch ID</label>
                                        <label class="badge badge-danger p-1 m-0">[[${brchId}]]</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <h3 class="card-title text-center mb-0 text-white font-weight-bold">PROFILE OVERVIEW</h3>
                                </div>
                                <div class="col-3">
                                    <a class="text-white" href="#" id="clickEditBranch" data-toggle="modal" data-target="#clickEditBranchProfile"> <i class="fas fa-pencil-alt btn-icon-append float-right"></i></a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <ul class="nav nav-pills nav-pills-custom justify-content-center pt-3" id="pills-tab-custom" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link profile-tab active" id="pills-branch-tab-custom" data-toggle="pill" href="#pills-branch" role="tab" aria-controls="pills-company" aria-selected="true">
                                                Branch Details
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link profile-tab" id="pills-password-tab-custom" data-toggle="pill" href="#pills-password" role="tab" aria-controls="pills-security" aria-selected="false">
                                                Login Credentials
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="tab-content tab-content-custom-pill pt-3 px-3 pb-1" id="pills-tabContent-custom">
                                        <div class="tab-pane fade show active" id="pills-branch" role="tabpanel" aria-labelledby="pills-branch-tab-custom">
                                            <form class="is-readonly">
                                                <div class="row">
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">Company Name:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" th:value="${companyName}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">Branch Name:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="bbranchName" th:value="${branch.branchName}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">Admin Name:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="bfirstName" th:value="${branch.firstName}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">User Name:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="buserName" th:value="${username}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">Email:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="bemail" th:value="${branch.email}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">Mobile No:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="bmobile" th:value="${branch.mobile}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">Address:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="baddress" th:value="${branch.address}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">State:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="bstate" th:value="${branch.state}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">City:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="bcity" th:value="${branch.city}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6 px-3">
                                                        <div class="form-group row mb-1">
                                                            <label class="col-sm-4 pr-0 text-warning col-form-label font-weight-bold">Pincode:</label>
                                                            <div class="col-sm-8 pl-0">
                                                                <input type="text" class="form-control is-disabled" id="bpinCode" th:value="${branch.pinCode}" disabled />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="tab-pane fade" id="pills-password" role="tabpanel" aria-labelledby="pills-password-tab-custom">
                                            <div class="template-demo">
                                                <form id="editable-form" class="editable-form" data-toggle="validator" th:action="@{/branch/userDetails}" th:object="${update}" role="form" method="post">
                                                    <div class="row mb-3">
                                                        <div class="col-6 border border-primary">
                                                            <div style="padding-left: 135px; padding-top: 12px;">
                                                                <strong class="text-warning">CHANGE USERNAME</strong>
                                                            </div>
                                                            <div class="form-group pt-4">
                                                                <label for="username">User Name<strong class="text-danger">*</strong></label>
                                                                <input type="text" class="form-control form-control-sm" name="username" data-minlength="3" data-error="Min 3 characters required !" placeholder="Enter username" required />
                                                                <div class="help-block with-errors text-danger"></div>
                                                            </div>
                                                            <div class="form-group pt-1">
                                                                <label for="password">Current Password<strong class="text-danger">*</strong></label>
                                                                <input
                                                                    name="password"
                                                                    type="password"
                                                                    class="form-control form-control-sm"
                                                                    id="password"
                                                                    data-error="Provide current password !"
                                                                    placeholder="Enter current Password"
                                                                    required
                                                                />
                                                                <div class="help-block with-errors text-danger"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 border-right border-top border-bottom border-primary">
                                                            <small class="text-warning">Note: Leave this fields blank if you are not going to change your password.</small>
                                                            <div class="form-group pt-3 mb-2">
                                                                <label for="userNameCopy">New Password</label>
                                                                <input
                                                                    type="password"
                                                                    data-minlength="6"
                                                                    class="form-control form-control-sm"
                                                                    id="inputPassword"
                                                                    pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$"
                                                                    data-error="Password must be alphanumeric !"
                                                                    placeholder="Enter password"
                                                                />
                                                                <small class="text-info">
                                                                    Min 6 characters required
                                                                </small>
                                                                <div class="help-block with-errors text-danger"></div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="userNameCopy">Confirm Password</label>
                                                                <input
                                                                    type="password"
                                                                    class="form-control form-control-sm"
                                                                    name="newPassword"
                                                                    id="password"
                                                                    data-match="#inputPassword"
                                                                    data-match-error="Whoops, these don't match"
                                                                    data-error="Provide confirm password !"
                                                                    placeholder="Enter confirm password"
                                                                />
                                                                <div class="help-block with-errors text-danger"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="text-center pb-3">
                                                        <button type="submit" class="btn btn-sm btn-primary mr-2">Submit</button>
                                                        <button type="reset" class="btn btn-sm btn-sm btn-light" data-dismiss="modal">Reset</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="clickEditBranchProfile" tabindex="-1" role="dialog" aria-labelledby="clickEditBranchProfile" aria-hidden="true">
                <div class="modal-dialog" role="document" style="max-width: 60%;">
                    <div class="modal-content">
                        <form data-toggle="validator" th:action="@{/branch/profile}" th:object="${update}" role="form" method="post">
                            <div class="modal-header py-2">
                                <h5 class="modal-title" id="editModal">Edit Profile</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="branchName">Branch Name<strong class="text-danger">*</strong></label>
                                            <input type="text" class="form-control" name="branchName" id="bbranchNameCopy" data-minlength="3" data-error="Min 3 characters required !" placeholder="Enter company name" required />
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                    <div class="col-4"></div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="firstName">Admin Name<strong class="text-danger">*</strong></label>
                                            <input type="text" class="form-control" name="firstName" id="bfirstNameCopy" data-minlength="5" data-error="Minimum 5 characters required !" placeholder="Enter Admin name" required />
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="email">Branch E-Mail ID<strong class="text-danger">*</strong></label>
                                            <input type="email" class="form-control" name="email" id="bemailCopy" data-error="Provide a valid email !" placeholder="Enter Email" required />
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="mobile">Mobile Number<strong class="text-danger">*</strong></label>
                                            <input type="text" class="form-control" pattern="[7-9]{1}[0-9]{9}" name="mobile" id="bmobileCopy" maxlength="10" data-error="Enter a valid phone number" placeholder="Enter phone no" required />
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="ownerState">State<strong class="text-danger">*</strong></label>
                                            <select class="form-control" name="state" id="bstateCopy" data-error="Select state !" required>
                                                <option value="" selected>Select</option>
                                                <option th:each="ob:${stateList}" th:value="${ob[1]}" th:text="${ob[1]}"></option>
                                            </select>
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="address">Address<strong class="text-danger">*</strong></label>
                                            <textarea type="text" class="form-control" rows="3" name="address" id="baddressCopy" data-error="Provide a address !" placeholder="Enter branch address" required></textarea>
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="city">City<strong class="text-danger">*</strong></label>
                                            <input type="text" class="form-control form-control-sm" name="city" id="bcityCopy" data-error="Provide a city !" placeholder="Enter city" required />
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label for="pinCode">Pincode<strong class="text-danger">*</strong></label>
                                            <input type="text" class="form-control" name="pinCode" id="bpinCodeCopy" data-error="Provide a pincode !" pattern="[0-9]{6}" maxlength="6" placeholder="Enter a pincode" required />
                                            <div class="help-block with-errors text-danger"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer justify-content-center py-2">
                                <button type="submit" class="btn btn-sm btn-success">Submit</button>
                                <button type="button" class="btn btn-sm btn-light" data-dismiss="modal">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </body>
</html>